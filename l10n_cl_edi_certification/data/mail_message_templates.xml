<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">

        <!-- ============================================ -->
        <!-- Templates para Proyecto de Certificaci√≥n    -->
        <!-- ============================================ -->

        <record id="message_project_started" model="mail.template">
            <field name="name">Certificaci√≥n: Proyecto Iniciado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚úì</span> Proyecto iniciado
                        <br/><br/>
                        <strong>Informaci√≥n del proyecto:</strong>
                        <ul>
                            <li>Cliente: <t t-out="object.partner_id.name or ''"/></li>
                            <li>Casos de prueba: <t t-out="object.cases_total_count or 0"/></li>
                            <li>Tipos de documento: <t t-out="len(object.folio_assignment_ids) or 0"/></li>
                        </ul>
                        El proyecto est√° listo para generar documentos.
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_validating" model="mail.template">
            <field name="name">Certificaci√≥n: Proyecto En Validaci√≥n</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #ffc107;">‚ö†</span> Proyecto en proceso de validaci√≥n ante SII
                        <br/><br/>
                        <strong>Estad√≠sticas:</strong>
                        <ul>
                            <li>Documentos generados: <t t-out="object.documents_total_count or 0"/></li>
                            <li>Casos validados: <t t-out="object.cases_validated_count or 0"/> / <t t-out="object.cases_total_count or 0"/></li>
                        </ul>
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_completed" model="mail.template">
            <field name="name">Certificaci√≥n: Proyecto Completado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745; font-size: 20px;">üéâ</span> <strong>Proyecto completado exitosamente</strong>
                        <br/><br/>
                        <strong>Resumen final:</strong>
                        <ul>
                            <li>Total casos: <t t-out="object.cases_total_count or 0"/></li>
                            <li>Casos aceptados: <t t-out="object.cases_accepted_count or 0"/></li>
                            <li>Progreso: <t t-out="object.progress_percentage or 0"/>%</li>
                            <li>Fecha completado: <t t-out="object.completion_date or ''"/></li>
                        </ul>
                        ¬°Felicidades! El cliente est√° certificado para facturaci√≥n electr√≥nica ante el SII.
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_back_to_progress" model="mail.template">
            <field name="name">Certificaci√≥n: Regresado a En Progreso</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #007bff;">‚Ü∂</span> Proyecto regresado a En Progreso
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_cancelled" model="mail.template">
            <field name="name">Certificaci√≥n: Proyecto Cancelado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #dc3545;">‚úó</span> Proyecto cancelado
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_back_to_draft" model="mail.template">
            <field name="name">Certificaci√≥n: Regresado a Borrador</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #6c757d;">‚Ü∂</span> Proyecto regresado a Borrador
                    </p>
                </div>
            </field>
        </record>

        <record id="message_project_testset_imported" model="mail.template">
            <field name="name">Certificaci√≥n: SET B√ÅSICO Importado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_project"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚ö°</span> <strong>SET B√ÅSICO importado exitosamente</strong>
                        <br/><br/>
                        Se crearon <strong><t t-out="ctx.get('cases_count', 0)"/></strong> casos de prueba:
                        <ul t-if="ctx.get('cases_names')">
                            <t t-foreach="ctx.get('cases_names', [])" t-as="case_name">
                                <li><t t-out="case_name or ''"/></li>
                            </t>
                        </ul>
                        Los casos est√°n listos para ser configurados y generados.
                    </p>
                </div>
            </field>
        </record>

        <!-- ============================================ -->
        <!-- Templates para Caso de Prueba               -->
        <!-- ============================================ -->

        <record id="message_case_prepared" model="mail.template">
            <field name="name">Certificaci√≥n: Caso Preparado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_case"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚úì</span> Caso preparado para generaci√≥n
                        <br/><br/>
                        <strong>Informaci√≥n del caso:</strong>
                        <ul>
                            <li>C√≥digo: <t t-out="object.code or ''"/></li>
                            <li>Tipo: <t t-out="object.document_type_id.name or ''"/></li>
                            <li>L√≠neas: <t t-out="len(object.line_ids) or 0"/></li>
                            <li>Total: <t t-out="format_amount(object.total_amount, object.currency_id) or ''"/></li>
                        </ul>
                    </p>
                </div>
            </field>
        </record>

        <record id="message_case_generated" model="mail.template">
            <field name="name">Certificaci√≥n: DTE Generado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_case"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚úì</span> <strong>Documento DTE generado</strong>
                        <br/><br/>
                        <ul>
                            <li>Folio asignado: <strong><t t-out="ctx.get('folio', 'N/A')"/></strong></li>
                            <li>Tipo: <t t-out="object.document_type_id.name or ''"/></li>
                            <li>Monto: <t t-out="format_amount(object.total_amount, object.currency_id) or ''"/></li>
                        </ul>
                        El documento est√° listo para ser validado.
                    </p>
                </div>
            </field>
        </record>

        <record id="message_case_validated" model="mail.template">
            <field name="name">Certificaci√≥n: Caso Validado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_case"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚úì</span> <strong>Documento validado correctamente</strong>
                        <br/><br/>
                        El DTE cumple con los requisitos del SII:
                        <ul>
                            <li>Estructura XML v√°lida</li>
                            <li>Firma digital verificada</li>
                            <li>Montos calculados correctamente</li>
                        </ul>
                    </p>
                </div>
            </field>
        </record>

        <record id="message_case_validation_errors" model="mail.template">
            <field name="name">Certificaci√≥n: Errores de Validaci√≥n</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_case"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #dc3545;">‚úó</span> <strong>Errores de validaci√≥n encontrados</strong>
                        <br/><br/>
                        <strong>Errores:</strong>
                        <ul t-if="ctx.get('validation_messages')">
                            <t t-foreach="ctx.get('validation_messages', [])" t-as="message">
                                <li style="color: #dc3545;"><t t-out="message or ''"/></li>
                            </t>
                        </ul>
                        Por favor, corrija los errores antes de continuar.
                    </p>
                </div>
            </field>
        </record>

        <!-- ============================================ -->
        <!-- Templates para Cliente                      -->
        <!-- ============================================ -->

        <record id="message_certificate_validated" model="mail.template">
            <field name="name">Certificaci√≥n: Certificado Validado</field>
            <field name="model_id" ref="model_l10n_cl_edi_certification_client"/>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        <span style="color: #28a745;">‚úì</span> <strong>Certificado digital validado correctamente</strong>
                        <br/><br/>
                        <ul>
                            <li>Archivo: <t t-out="object.certificate_filename or ''"/></li>
                            <li>Cliente: <t t-out="object.partner_id.name or ''"/></li>
                            <li>RUT: <t t-out="object.rut or ''"/></li>
                        </ul>
                        El certificado y la contrase√±a son v√°lidos y pueden ser utilizados para firmar documentos.
                    </p>
                </div>
            </field>
        </record>

    </data>
</odoo>
